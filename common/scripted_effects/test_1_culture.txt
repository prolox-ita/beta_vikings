state_calculation = {	#STATE 
	every_state = {
		for_each_loop = {
			array = state_culture_array_num
			
			# Sets each value in population array to percentage
			add_to_array = {
			  array = state_culture_pop_array
			  index = i
			  value = state_culture_array_num^i
			}
			# Multiplies percentage with state pop to find state culture population
			multiply_variable = {
			  var = state_culture_pop_array^i
			  value = state_population_k
			}
		}
	# same thing, but for religion
		for_each_loop = {
			array = state_religion_array_num
			
			set_variable = {
			  var = state_religion_pop_array^i
			  value = state_religion_array_num^i
			}
			multiply_variable = {
			  var = state_religion_pop_array^i
			  value = state_population_k
			}
		}
	}
}
order_cultures = {
	every_state = {
		set_temp_variable = { length_temp = state_culture_array_num^num }
		for_loop_effect = {
			start = 0
			end = length_temp
			add = 1
			value = v 
			break = b
			
			find_highest_in_array = {
				array = state_culture_array_num
				value = v
				index = i
			}
			set_temp_variable = { state_culture_ordered_array_var = state_culture_array^i }
			set_temp_variable = { state_culture_ordered_pop_array_var = state_culture_pop_array^i }

			remove_from_array = {
				array = state_culture_array_num
				index = i
			}
			add_to_array = {
				array = state_culture_ordered_array_num 
				value = v #should be culture p%
			}
			remove_from_array = {
				array = state_culture_array
				index = i
			}
			add_to_array = {
				array = state_culture_ordered_array 
				value = state_culture_ordered_array_var #should be culture p%
			}
			remove_from_array = {
				array = state_culture_pop_array
				index = i
			}
			add_to_array = {
				array = state_culture_ordered_pop_array 
				value = state_culture_ordered_pop_array_var #should be culture p%
			}


		}
	}
}

